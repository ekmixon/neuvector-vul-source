#!/usr/bin/env python2
# Duplicates the statuses from one CVE to another.
# Copyright (C) 2010 Canonical, Ltd.
# Author: Kees Cook <kees@ubuntu.com>
import optparse
import os
import cve_lib

parser = optparse.OptionParser()
(options, args) = parser.parse_args()

cvedir = cve_lib.active_dir
source_filename = os.path.join(cvedir, args[0])
status = "\n\n".join(open(source_filename, "r").read().split('\n\n')[1:])

filename = os.path.join(cvedir, args[1])
with open(filename, "r") as f:
    header = f.read().split('\n\n')[0]

with open(f'{filename}.new', 'w') as f:
    f.write('%s\n\n%s' % (header, status))
os.rename(f'{filename}.new', filename)
